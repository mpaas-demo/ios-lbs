window.AlipayJSBridge&&!window.AlipayCallFromJS||function(){"H5_BRIDGE_JS_REPLACE_STRING";var e,n=null,t=JSON.stringify,a=JSON.parse,i=Array.prototype.push,r=!1;if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER&&window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER.postMessage){window.webkit;var o=window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER.postMessage,s=window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER;window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER.postMessage=function(){},e=function(e){return o.apply(s,[e])},r=!0}function d(e){/complete|loaded|interactive/.test(document.readyState)?setTimeout(function(){e()},1):document.defaultView.addEventListener("DOMContentLoaded",function(){e()},!1)}for(var l="NEBULATYPEINFO",c="ArrayBuffer",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=new Uint8Array(256),f=0;f<u.length;f++)w[u.charCodeAt(f)]=f;function p(e){for(var n="",t=new Uint8Array(e),a=t.byteLength,i=0;i<a;i++)n+=String.fromCharCode(t[i]);return window.btoa(n)}function g(e){var n,t,a,i,r,o=.75*e.length,s=e.length,d=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),c=new Uint8Array(l);for(n=0;n<s;n+=4)t=w[e.charCodeAt(n)],a=w[e.charCodeAt(n+1)],i=w[e.charCodeAt(n+2)],r=w[e.charCodeAt(n+3)],c[d++]=t<<2|a>>4,c[d++]=(15&a)<<4|i>>2,c[d++]=(3&i)<<6|63&r;return l}var m={},E=[],y=[],A={call:function(t,a,o){if(function(){if(!n&&!r)try{(n=document.createElement("iframe")).id="__AlipayJSBridgeIframe",n.style.display="none",document.documentElement?document.documentElement.appendChild(n):document.appendChild(n)}catch(e){}}(),"string"==typeof t){"function"==typeof a?(o=a,a=null):"object"!=typeof a&&(a=null);var s=t+"_"+(new Date).getTime()+Math.random();"function"==typeof o&&(m[s]=o),a&&a.callbackId?(t={responseId:a.callbackId,responseData:a},delete a.callbackId):(t={handlerName:t,data:function(e){var n=e;for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];a instanceof ArrayBuffer&&(e[t]=p(a),n[l]||(n[l]={}),n[l][t]={type:c})}return n}(a)||{}}).callbackId=""+s,i.call(E,t),window.AlipayCallFromJS&&"function"==typeof window.AlipayCallFromJS?window.AlipayCallFromJS(A._fetchQueue(),document.location.href):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER&&window.webkit.messageHandlers.PSDBRIDGEMESSAGEHANDLER.postMessage?e({type:"api",queue:A._stringifyMessageQueue(),msgKt:msgTKTarget}):n&&(n.src="alipaybridge://dispatch_message")}},trigger:function(e,n){if(e){setTimeout(function(){!function(e,n){var t;n&&n.callbackId&&(t=n.callbackId,n.callbackId=null);var a=document.createEvent("Events");if(a.initEvent(e,!1,!0),a.syncJsApis=[],n)if(n.__pull__)for(var i in delete n.__pull__,n)a[i]=n[i];else a.data=n;var r=!document.dispatchEvent(a);if(t){var o={};o.callbackId=t,o[e+"EventCanceled"]=r,o.syncJsApis=a.syncJsApis,A.call("__nofunc__",o)}}(e,n)},1)}},_invokeJS:function(e){if((e=a(e)).responseId){var n=m[e.responseId];"boolean"==typeof e.keepCallback&&e.keepCallback||delete m[e.responseId],"function"==typeof n&&setTimeout(function(){n(function(e){if(e&&e[l]){var n=e[l];if(n){for(var t in n)if(n.hasOwnProperty(t)){var a=n[t];a.type&&a.type===c&&(e[t]=g(e[t]))}delete e[l]}}return e}(e.responseData))},1)}else e.handlerName&&(e.callbackId&&(e.data=e.data||{},e.data.callbackId=e.callbackId),A.trigger(e.handlerName,e.data))},_handleMessageFromObjC:function(e){y&&!window.AlipayJSBridge?y.push(e):A._invokeJS(e)},_stringifyMessageQueue:function(){var e=t(E);return E=[],e},_fetchQueue:function(e){return shouldUseTK?e&&msgTKTarget&&msgTKTarget===e?A._stringifyMessageQueue():"[]":A._stringifyMessageQueue()},init:function(){var e=document.createEvent("Events");e.initEvent("AlipayJSBridgeReady",!1,!1);var n=document.addEventListener;document.addEventListener=function(t,a){t===e.type?setTimeout(function(){a(e)},1):n.apply(document,arguments)},document.dispatchEvent(e);var t=y;y=null;for(var a=0;a<t.length;a++)A._invokeJS(t[a])}};window.AlipayJSBridge=A,A.startupParams=window.ALIPAYH5STARTUPPARAMS||{},d(A.init),d(function(){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.PSDBRIDGEDOMREADY&&window.webkit.messageHandlers.PSDBRIDGEDOMREADY.postMessage&&window.webkit.messageHandlers.PSDBRIDGEDOMREADY.postMessage("")})}();